<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bài tập về nhà buổi 6- JS - Techmaster</title>
</head>

<body>
    <script>

        let grades = [
            { name: 'John', grade: 8, sex: 'M' },
            { name: 'Sarah', grade: 12, sex: 'F' },
            { name: 'Bob', grade: 16, sex: 'M' },
            { name: 'Johnny', grade: 2, sex: 'M' },
            { name: 'Ethan', grade: 4, sex: 'M' },
            { name: 'Paula', grade: 18, sex: 'F' },
            { name: 'Donald', grade: 5, sex: 'M' },
            { name: 'Jennifer', grade: 13, sex: 'F' },
            { name: 'Courtney', grade: 15, sex: 'F' },
            { name: 'Jane', grade: 9, sex: 'F' }
        ]

        // 1. Tìm thứ hạng trung bình của cả lớp 
        function averageGrade(arr) {
            let sum = 0;
            for (let i = 0; i < arr.length; i++) {
                sum = sum + arr[i].grade
            }
            return sum / arr.length
        }
        console.log(averageGrade(grades))


        // 2. Tìm thứ hạng trung bình của nam trong lớp 
        function averageMale(arr) {
            let sum = 0;
            let count = 0
            for (let i = 0; i < arr.length; i++) {
                if (arr[i].sex == 'M') {
                    sum += arr[i].grade;
                    count++          //count++ để đếm số lượng phần tử
                }
            }
            return sum / count
        }
        console.log(averageMale(grades))


        // 3. Tìm thứ hạng trung bình của Nữ trong lớp
        function averageFemale(arr) {
            let sum = 0;
            let count = 0
            for (let i = 0; i < arr.length; i++) {
                if (arr[i].sex == 'F') {
                    sum += arr[i].grade;
                    count++          //count++ để đếm số lượng phần tử
                }
            }
            return sum / count
        }
        console.log(averageFemale(grades))


        // 4. Tìm thứ hạng cao nhất của Nam trong lớp 
        function highestGradeMale(arr) {
            let newArr = []
            for (let i = 0; i < arr.length; i++) {
                if (arr[i].sex == 'M') {
                    newArr.push(arr[i].grade)
                }
            }
            let result = Math.min(...newArr)
            return result
        }
        console.log(highestGradeMale(grades))


        // 5. Tìm thứ hạng cao nhất của Nữ trong lớp
        function highestGradeFemale(arr) {
            let newArr = []
            for (let i = 0; i < arr.length; i++) {
                if (arr[i].sex == 'F') {
                    newArr.push(arr[i].grade)
                }
            }
            let result = Math.min(...newArr)
            return result
        }
        console.log(highestGradeFemale(grades))


        // 6. Tìm thứ hạng thấp nhất của Nam trong lớp
        function lowestGradeMale(arr) {
            let newArr = []
            for (let i = 0; i < arr.length; i++) {
                if (arr[i].sex == 'M') {
                    newArr.push(arr[i].grade)
                }
            }
            let result = Math.max(...newArr)
            return result
        }
        console.log(lowestGradeMale(grades))


        // 7. Tìm thứ hạng thấp nhất của Nữ trong lớp 
        function lowestGradeFemale(arr) {
            let newArr = []
            for (let i = 0; i < arr.length; i++) {
                if (arr[i].sex == 'F') {
                    newArr.push(arr[i].grade)
                }
            }
            let result = Math.max(...newArr)
            return result
        }
        console.log(lowestGradeFemale(grades))


        // 8. Tìm thứ hạng cao nhất của cả lớp 
        function highestGrade(arr) {
            return Math.min(...[highestGradeFemale(arr), highestGradeMale(arr)])
        }
        console.log(highestGrade(grades))


        // 9. Tìm thứ hạng thấp nhất của cả lớp
        function lowestGrade(arr) {
            return Math.max(...[lowestGradeFemale(arr), lowestGradeMale(arr)])
        }
        console.log(lowestGrade(grades))


        // 10. Lấy ra danh sách tất cả học viên nữ trong lớp
        function listFemale(arr) {
            let newArr = [];
            for (let i = 0; i < arr.length; i++) {
                if (arr[i].sex == 'F') {
                    newArr.push(arr[i]);
                }
            }
            return newArr
        }
        console.log(listFemale(grades))


        // 11. Sắp xếp tên học viên theo chiều tăng dần của bảng chữ cái
        function sortNameFemale(arr) {
            let newArr = []
            for (let i = 0; i < arr.length; i++) {
                if (arr[i].sex == 'F') {
                    newArr.push(arr[i].name)
                }
            }
            return newArr.sort()
        }
        console.log(sortNameFemale(grades))


        // 12. Sắp xếp thứ hạng học viên theo chiều giảm dần
        function sortGrade(arr) {
            let newArr = []
            for (let i = 0; i < arr.length; i++) {
                newArr.push(arr[i].grade)
            }
            return newArr.sort(function (a, b) { return a - b })
        }
        console.log(sortGrade(grades))


        // 13. Lấy ra học viên nữ có tên bắt đầu bằng "J"
        function femaleNameBeginJ(arr) {
            let newArr = sortNameFemale(arr)
            let result = []
            for (let i = 0; i < newArr.length; i++) {
                if (newArr[i].charAt(0) == 'J') {
                    result.push(newArr[i])
                }
            }
            return result
        }
        console.log(femaleNameBeginJ(grades))


        // 14. Lấy ra top 5 người có thứ hạng cao nhất
        function top5Person(arr) {
            let newArr = sortGrade(arr).slice(0, 5)
            let result = []
            for (let i = 0; i < arr.length; i++) {
                if (newArr.includes(arr[i].grade)) {
                    result.push(arr[i].name)
                }
            }
            return result
        }
        console.log(top5Person(grades))
        console.log('-----------------------------------------------------------------------------------------------------------')


        /*Sử dụng Arrow function và các kiến thức đã học về: map, filter, forEach, find, ...
        Làm lại các bài tập sau: */

        // Bài 1: Viết function truyền vào 1 mảng. Kiểm tra mảng đó có phải là mảng tăng dần hay không
        let increArr = arr => arr.every((ele, index, arr) => {
            if (index == 0) {
                return true
            } else {
                return ele > arr[index - 1];
            }
        }
        )
        console.log(increArr([1, -8, 9, 7]))
        console.log(increArr([1, 8, 9, 17]))


        // Bài 2: Viết function truyền vào 1 mảng.Tìm số lớn nhất trong mảng
        let maxNum = arr => Math.max(...arr)
        console.log(maxNum([1, -3, 30, 8, 15]))


        /*Bài 3: Viết function để lấy một mảng bao gồm các phần tử xuất hiện trong cả hai mảng
        Ví dụ: similarity([1, 2, 3], [1, 2, 4]) => [1, 2] */

        let similar = (arr1, arr2) => arr1.filter(ele => arr2.includes(ele))
        console.log(similar([1, 2, 3], [1, 2, 4, 2, 1]));


        // Bài 4: Viết một chương trình JavaScript để lấy ra phần tử không xuất hiện ở cả 2 mảng
        // symmetricDifference([1, 2, 3], [1, 2, 4]) => [3, 4]

        let difference = (arr1, arr2) => {
            let newArr1 = arr1.filter((ele, index, arr1) => !arr2.includes(ele) && arr1.indexOf(ele) == index)
            let newArr2 = arr2.filter((ele, index, arr2) => !arr1.includes(ele) && arr2.indexOf(ele) == index)
            return newArr1.concat(newArr2)
        }
        console.log(difference([1, 4, 3, 5, 5], [1, 2, 4, 2]));


        /* Bài 5: Viết function lấy tất cả các phần tử được xuất hiện trong 2 mảng
        union([1, 2, 3], [5, 4, 3, 2]) => [1, 2, 3, 4, 5]
        union([1, 2, 3], [1, 2, 3]) => [1, 2, 3] */

        let union = (arr1, arr2) => {
            let newArr = arr1.concat(arr2)
            let result = newArr.filter((ele, index, newArr) => newArr.indexOf(ele) == index)
            return result
        }
        console.log(union([1, 2, 3, 2], [4, 3, 2, 5]));


        /* Bài 6: Viết chương trình JavaScript để tìm các giá trị trùng lặp trong một mảng.
        findDuplicates([1, 2, 5, 2, 6, 2, 5]) => [2, 5] */

        let findDuplicates = arr => newArr = arr.filter((ele, index, arr) => arr.lastIndexOf(ele) != index && arr.indexOf(ele) == index)
        console.log(findDuplicates([1, 2, 5, 2, 6, 2, 5]));


        /*Bài 7: Viết chương trình JavaScript tính tổng các số chẵn trong mảng
        Sử dụng các cách sau: for, while, do -while, forEach, filter, reduce, ...Nếu ai có thể nghĩ thêm cách tính nào cũng được =))
        (Yêu cầu: Viết tất cả các cách cho bài tập 7) */

        let arrNum = [1, 2, 3, 4, 5, 6, 7, 8]

        //cách 1 dùng for
        let sumEvenNum1 = arr => {
            let result = 0
            for (let i = 0; i < arr.length; i++) {
                if (arr[i] % 2 == 0) {
                    result += arr[i]
                }
            }
            return result
        }
        console.log(sumEvenNum1(arrNum))

        //cách 2 dùng while
        let sumEvenNum2 = arr => {
            let result = 0;
            let i = 0;
            while (i < arr.length) {
                if (arr[i] % 2 == 0) {
                    result += arr[i]
                }
                i++
            }
            return result
        }
        console.log(sumEvenNum2(arrNum))

        //cách 3: dùng do-while
        let sumEvenNum3 = arr => {
            let result = 0;
            let i = 0;
            do {
                if (arr[i] % 2 == 0) {
                    result += arr[i]
                }
                i++
            } while (i < arr.length)
            return result
        }
        console.log(sumEvenNum3(arrNum))

        //cách 4: forEach
        let sumEvenNum4 = arr => {
            let result = 0
            arr.forEach(ele => {
                if (ele % 2 == 0) {
                    result += ele
                }
            })
            return result
        }
        console.log(sumEvenNum4(arrNum))

        //cách 5: filter+forEach
        let sumEvenNum5 = arr => {
            let result = 0
            let newArr = arr.filter(ele => ele % 2 == 0)
            newArr.forEach(ele => result += ele)
            return result
        }
        console.log(sumEvenNum5(arrNum))

        //cách 6: reduce
        let sumEvenNum6 = arr => {
            let result = arr.reduce((accumulator, currentValue) => {
                if (currentValue % 2 != 0) {
                    currentValue = 0
                }
                return accumulator + currentValue
            }, 0)
            return result
        }
        console.log(sumEvenNum6(arrNum))

        //cách 7: map+forEach
        let sumEvenNum7 = arr => {
            let result = 0
            let newArr = arr.map(ele => {
                return {
                    check: ele % 2 == 0,
                    number: ele,
                }
            }
            )
            newArr.forEach(ele => {
                if (ele.check == true) {
                    result += ele.number
                }
            })
            return result
        }
        console.log(sumEvenNum7(arrNum))


    </script>
</body>

</html>